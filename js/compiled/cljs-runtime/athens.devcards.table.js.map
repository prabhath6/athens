{"version":3,"sources":["athens/devcards/table.cljs"],"mappings":"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","names":["js/athens","js/athens.devcards","js/athens.devcards.all-pages","js/athens.devcards.all-pages.conn","athens.devcards.all-pages/conn","athens.devcards.db/new-conn","athens.devcards.db/posh-conn!","athens.devcards.all-pages/handler","n","cljs.core/deref","G__65473","G__65474","posh.reagent/transact!","cljs.core.rand.cljs$core$IFn$_invoke$arity$0","js/Date","athens.devcards.all-pages/date-string","x","athens.devcards.all-pages/table","conn","page-eids","G__65476","G__65477","posh.reagent/q","pages","G__65478","G__65479","G__65480","posh.reagent/pull-many","athens.style/+text-align-left","athens.style/+text-align-right","iter__4582__auto__","s__65482","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4580__auto__","size__4581__auto__","cljs.core/count","b__65484","cljs.core/chunk-buffer","i__65483","map__65485","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__65481","cljs.core/chunk-rest","map__65487","cljs.core/first","cljs.core/cons","cljs.core/rest","uid","title","modified","created","children","athens.lib.dom.attributes.with_attributes.cljs$core$IFn$_invoke$arity$variadic","athens.lib.dom.attributes.with_styles.cljs$core$IFn$_invoke$arity$variadic","athens.style/+link","athens.router/navigate-page","clojure.string.join.cljs$core$IFn$_invoke$arity$2","p1__65475#","cljs.core.map.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-first"],"sourcesContent":["(ns athens.devcards.all-pages\n  (:require\n    [athens.devcards.db :refer [new-conn posh-conn! load-real-db-button]]\n    [athens.lib.dom.attributes :refer [with-styles with-attributes]]\n    [athens.router :refer [navigate-page]]\n    [athens.style :as style :refer [style-guide-css +text-align-right +text-align-left +link]]\n    [cljsjs.react]\n    [cljsjs.react.dom]\n    [devcards.core :refer [defcard defcard-rg]]\n    [garden.core :refer [css]]\n    [posh.reagent :refer [transact! pull-many q]]))\n\n\n(defcard-rg Import-Styles\n  [style-guide-css])\n\n\n(defcard-rg Modify-Devcards\n  \"Increase width to 90% for table\"\n  [:style (css [:.com-rigsomelight-devcards-container {:width \"90%\"}])])\n\n\n(defcard Instantiate-Dsdb)\n(defonce conn (new-conn))\n(posh-conn! conn)\n\n\n(defn handler\n  []\n  (let [n (:max-eid @conn)]\n    (transact! conn [{:node/title     (str \"Test Title \" n)\n                      :block/uid      (str \"uid\" n)\n                      :block/children [{:block/string \"a block string\" :block/uid (str \"uid-\" n \"-\" (rand))}]\n                      :create/time    (.getTime (js/Date.))\n                      :edit/time      (.getTime (js/Date.))}])))\n\n\n(defcard-rg Create-Page\n  \"Page title increments by more than one each time because we create multiple entities (the child blocks).\"\n  [:button.primary {:on-click handler} \"Create Page\"])\n\n\n(defcard-rg Load-Real-DB\n  [load-real-db-button conn])\n\n\n(defn- date-string\n  [x]\n  (if (< x 1)\n    [:span \"(unknown date)\"]\n    (.toLocaleString  (js/Date. x))))\n\n\n(defn table\n  [conn]\n  (let [page-eids (q '[:find [?e ...]\n                       :where\n                       [?e :node/title ?t]]\n                     conn)\n        pages (pull-many conn '[\"*\" {:block/children [:block/string] :limit 5}] @page-eids)]\n    [:table\n     [:thead\n      [:tr\n       [:th [:h5 +text-align-left \"Title\"]]\n       [:th [:h5 +text-align-left \"Body\"]]\n       [:th [:h5 +text-align-right \"Modified\"]]\n       [:th [:h5 +text-align-right \"Created\"]]]]\n     [:tbody\n      (for [{uid :block/uid\n             title :node/title\n             modified :edit/time\n             created :create/time\n             children :block/children} @pages]\n        ^{:key uid}\n        [:tr\n         [:td\n          [:h4 (with-attributes\n                 (with-styles +link {:width \"200px\"})\n                 {:on-click #(navigate-page uid)})\n           title]]\n         [:td (with-styles {:width \"700px\" :max-height \"40px\" :white-space \"wrap\" :overflow \"hidden\" :text-overflow \"ellipsis\" :display \"block\"} +text-align-left)\n          (clojure.string/join \" \" (map #(str \"\u2022 \" (:block/string %)) children))]\n         [:td +text-align-right (date-string modified)]\n         [:td +text-align-right (date-string created)]])]]))\n\n\n(defcard-rg Table\n  [table conn])\n\n"]}