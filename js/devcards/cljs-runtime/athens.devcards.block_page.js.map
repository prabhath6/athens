{"version":3,"sources":["athens/devcards/block_page.cljs"],"mappings":"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","names":["devcards.core/register-card","devcards.core/card-base","js/athens","js/athens.devcards","js/athens.devcards.block-page","js/athens.devcards.block-page.t_athens$devcards$block_page50819","athens.devcards.block-page/t_athens$devcards$block_page50819","_50821","meta50820","cljs.core/PROTOCOL_SENTINEL","this__47891__auto__","devcard-opts__47892__auto__","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","v__47910__auto__","cljs.core/fn?","data-atom__47911__auto__","owner__47912__auto__","reagent.core/as-element","cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic","devcards.core/assert-options-map","this__4428__auto__","writer__4429__auto__","opt__4430__auto__","cljs.core/-write","athens.devcards.block-page/->t_athens$devcards$block_page50819","athens.style/base-styles","athens.devcards.block-page/datoms","js/athens.devcards.block-page.conn","athens.devcards.block-page/conn","datascript.core.create_conn.cljs$core$IFn$_invoke$arity$1","athens.db/schema","posh.reagent/posh!","posh.reagent/transact!","athens.devcards.block-page/block-page-el","block","parents","map__50822","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","string","children","cljs.core.interpose.cljs$core$IFn$_invoke$arity$2","iter__4582__auto__","s__50825","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4580__auto__","size__4581__auto__","cljs.core/count","b__50827","cljs.core/chunk-buffer","i__50826","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__50824","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","p","map__50828","map__50830","title","uid","athens.router/navigate-page","or__4185__auto__","s__50833","b__50835","i__50834","iter__50832","child","map__50836","map__50838","id","athens.devcards.blocks/block-el","athens.devcards.block-page/block-page-component","conn","ident","cljs.core/deref","posh.reagent/pull","athens.db/block-pull-pattern","athens.db/parents-pull-pattern","athens.db/shape-parent-query","js/athens.devcards.block-page.t_athens$devcards$block_page50840","athens.devcards.block-page/t_athens$devcards$block_page50840","_50842","meta50841","athens.devcards.block-page/->t_athens$devcards$block_page50840","cljs.core/chunk-first"],"sourcesContent":["(ns athens.devcards.block-page\n  (:require\n    [athens.db :as db]\n    [athens.devcards.blocks :refer [block-el]]\n    [athens.router :refer [navigate-page]]\n    [athens.style :refer [base-styles]]\n    [cljsjs.react]\n    [cljsjs.react.dom]\n    [datascript.core :as d]\n    [devcards.core :refer-macros [defcard defcard-rg]]\n    [posh.reagent :refer [transact! posh! pull]]))\n\n\n(defcard-rg Import-Styles\n  [base-styles])\n\n\n(defcard Instantiate-Dsdb)\n\n\n(def datoms\n  [{:db/id          2381,\n    :block/uid      \"OaSVyM_nr\",\n    :block/open     true,\n    :node/title     \"Athens FAQ\",\n    :block/children [{:db/id          2158,\n                      :block/uid      \"BjIm6GeRP\",\n                      :block/string   \"Why open-source?\",\n                      :block/open     true,\n                      :block/order    3,\n                      :block/children [{:db/id        2163,\n                                        :block/uid    \"GNaf3XzpE\",\n                                        :block/string \"The short answer is the security and privacy of your data.\",\n                                        :block/open   true,\n                                        :block/order  1}\n                                       {:db/id          2347,\n                                        :block/uid      \"jbiKpcmIX\",\n                                        :block/string   \"Firstly, I wouldn't be surprised if Roam was eventually open-sourced.\",\n                                        :block/open     true,\n                                        :block/order    0,\n                                        :block/children [{:db/id        2176,\n                                                          :block/uid    \"gVINXaN8Y\",\n                                                          :block/string \"Suffice it to say that Roam being open-source is undeniably something that the team has already considered. Why is it not open-source already? You'd have to ask the Roam team, but Roam, a business, is not obligated to open-source anything.\",\n                                                          :block/open   true,\n                                                          :block/order  2}\n                                                         {:db/id          2346,\n                                                          :block/uid      \"ZOxwo0K_7\",\n                                                          :block/string   \"The conclusion of the [[Roam White Paper]] states that Roam's vision is a collective, \\\"open-source\\\" intelligence.\",\n                                                          :block/open     true,\n                                                          :block/order    0,\n                                                          :block/children [{:db/id        2174,\n                                                                            :block/uid    \"WKWPPSYQa\",\n                                                                            :block/string \"((iWmBJaChO))\",\n                                                                            :block/open   true,\n                                                                            :block/order  0}]}\n                                                         {:db/id        2349,\n                                                          :block/uid    \"VQ-ybRmNh\",\n                                                          :block/string \"In the Roam Slack, I recall Conor saying one eventual goal is to work on a protocol that affords interoperability between open source alternatives. I would share the message but can't find it because of Slack's 10k message limit.\",\n                                                          :block/open   true,\n                                                          :block/order  1}\n                                                         {:db/id        2351,\n                                                          :block/uid    \"PGGS8MFH_\",\n                                                          :block/string \"Ultimately, we don't know when/if Roam will be open-sourced, but it's possible that Athens could accelerate or catalyze this. Regardless, there will always be some who are open-source maximalists and some who want to self-host, because that's probably really the most secure thing you can do (if you know what you're doing).\",\n                                                          :block/open   true,\n                                                          :block/order  3}]}]}]}])\n\n\n(defonce conn (d/create-conn db/schema))\n(posh! conn)\n(transact! conn datoms)\n\n\n;; TODO: replace \" > \" with an icon. Get a TypeError when doing this, though. Maybe same problem as \"->\" issue in Athena results\n(defn block-page-el\n  [block parents]\n  (let [{:block/keys [string children]} block]\n    [:div\n     [:span {:style {:color \"gray\"}}\n      (interpose\n        \" > \"\n        (for [p parents]\n          (let [{:keys [node/title block/uid block/string]} p]\n            [:span {:key uid :style {:cursor \"pointer\"} :on-click #(navigate-page uid)} (or string title)])))]\n     [:h1 (str \"\u2022 \" string)]\n     [:div (for [child children]\n             (let [{:keys [db/id]} child]\n               ^{:key id} [block-el child]))]]))\n\n\n(defn block-page-component\n  \"\"\n  [conn ident]\n  (let [block   @(pull conn db/block-pull-pattern ident)\n        parents (->> @(pull conn db/parents-pull-pattern ident)\n                     (db/shape-parent-query))]\n    ;;(prn block parents)\n    [block-page-el block parents]))\n\n\n(defcard-rg Block-Page\n  \"pull entity 2347: a block within Athens FAQ\n\n  two queries:\n\n  1. block+children\n  1. parents for context\"\n  [block-page-component conn 2347])\n"]}