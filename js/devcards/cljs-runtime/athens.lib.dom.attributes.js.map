{"version":3,"sources":["athens/lib/dom/attributes.cljc"],"mappings":"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","names":["athens.lib.dom.attributes/merge-dom-classes","attrs","dom-classes","class-str","clojure.string.join.cljs$core$IFn$_invoke$arity$2","cljs.core.update.cljs$core$IFn$_invoke$arity$3","s","var_args","args__4795__auto__","len__4789__auto__","i__4790__auto__","argseq__4796__auto__","cljs.core/IndexedSeq","athens.lib.dom.attributes/with-classes","seq46694","self__4777__auto__","cljs.core/seq","athens$lib$dom$attributes$f.cljs$core$IFn$_invoke$arity$1","athens.lib.dom.attributes/merge-styles","styles","cljs.core.update.cljs$core$IFn$_invoke$arity$4","cljs.core/merge","G__46780","athens.lib.dom.attributes/with-styles","args-arr__4810__auto__","argseq__4811__auto__","seq46776","G__46777","cljs.core/first","cljs.core/next","self__4776__auto__","map-or-fn","cljs.core/fn?","athens.lib.dom.attributes.with_styles.cljs$core$IFn$_invoke$arity$1","more","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","acc","x","athens.lib.dom.attributes/with-attributes","seq46825","attributes","cljs.core/map?","cljs.core/reduce-kv","acc0","attribute","v","G__46841","cljs.core/Keyword","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2"],"sourcesContent":["(ns athens.lib.dom.attributes\n  (:require\n    [clojure.string]))\n\n\n(defn merge-dom-classes\n  [attrs dom-classes]\n  (let [class-str (if (string? dom-classes)\n                    dom-classes\n                    (clojure.string/join \" \" dom-classes))]\n    (update attrs :class (fn [s]\n                           (if s\n                             (str s \" \" class-str)\n                             class-str)))))\n\n\n(defn with-classes\n  [& dom-classes]\n  (fn f\n    ([] (f nil))\n    ([attrs]\n     (merge-dom-classes attrs dom-classes))))\n\n\n(defn merge-styles\n  [attrs styles]\n  (update attrs :style merge styles))\n\n\n(defn with-styles\n  ([map-or-fn]\n   (if (fn? map-or-fn)\n     (with-styles (map-or-fn))\n     (if (:style map-or-fn)\n       map-or-fn\n       {:style map-or-fn})))\n  ([map-or-fn & more]\n   (reduce (fn [acc x]\n             (update acc :style merge (:style (with-styles x))))\n           (with-styles map-or-fn)\n           more)))\n\n\n(defn with-attributes\n  [& attributes]\n  (reduce (fn [acc map-or-fn]\n            (cond\n              (fn? map-or-fn)\n              (map-or-fn acc)\n\n              (map? map-or-fn)\n              (reduce-kv (fn [acc0 attribute v]\n                           (case attribute\n                             :style (merge-styles      acc0 v)\n                             :class (merge-dom-classes acc0 v)\n\n                             ;; Potentially override whatever is there\n                             ;;  (e.g. we cannot merge on-change handlers)\n                             (assoc acc0 attribute v)))\n                         acc\n                         map-or-fn)\n\n              :else\n              (throw (ex-info (str \"Expected map or function\") {:value map-or-fn}))))\n          {} attributes))\n\n\n(comment\n\n  (with-attributes\n    {:class \"foo bar\"}\n    {:class \"baz poo\"}\n    {:style {:color :red}}\n    )\n  )\n"]}